## mCASH MAPI PoC app

This is a simple PoC that evaluates mCASH usage within an e-commerce web app.

#### About this version:

A "Donation" app, in which the whole payment cycle with mCASH is implemented.
Each browser session has a shopping cart, which can be "opened", "waiting for payment" (after the QR code scan) or "paid"
(after the user authorization and app capture of the transaction).

#### Ideas for future versions:

* Deal with user payment rejection.
* Retrieving donator personal info (address) from mCASH.
* App user sign-up/sign-in: no more session shopping carts.

#### Running the app:

* Get the [Heroku Toolbelt](https://toolbelt.heroku.com/).
* Clone this repo.
* In the project root, create a virtualenv:
```
$ virtualenv venv
```
* Activate it:
```
$ source venv/bin/activate
```
* Install project dependencies:
```
$ pip install -r requirements.txt
```
* Setup app database, running:
```
$ ./syncdb.sh
$ ./migrate.sh
```
* Tunnel ngrok to localhost:8000.
* Create a file named .env in the project root with the following content:
```
MCASH_MERCHANT_ID=iw1yhe
MCASH_USER=thedude
MCASH_USER_SECRET=supersecret
MCASH_TESTBED_TOKEN=A8_0ie3jUVq2TJ252W42L52DbSnZlWHWIsHkMjYWTdE
HOST_DOMAIN=< domain generated by ngrok, eg. 14ce6041.ngrok.com >
```
* Create a shortlink that points to your app instance:
```
$ ./generate_shortlink.sh
```
* Append the following line to .env file:
```
MCASH_SHORTLINK_ID=< shortlink id generated in last step >
```
* Run it:
```
$ ./run.sh
```

[Play with the mCASH testbed.](http://mcashtestbed.appspot.com/testbed/merchant/iw1yhe/)

PS: Tested with QR simulated scanning through the testbed.
Scanning the QR code on mobile has not been tested yet.