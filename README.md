## mCASH MAPI PoC app

This is a simple app to evaluate mCASH usage within a e-commerce web app.

#### About this version:

A "Donation" app, in which the whole payment cycle with mCASH is implemented.
Each browser session has a shopping cart, which can be "opened", "waiting for payment" (after the qr-code scan) or "paid"
(after the user authorization and app capture of the transaction).

#### Ideas for future versions:

* Retrieving donator personal info (address) from mCASH.
* Integrating with app sign-up/sign-in flow: no more session shopping carts.

#### Running the app:

1. Get the [Heroku Toolbelt](https://toolbelt.heroku.com/)
2. Clone this repo
3. In the project root, create a virtualenv:
```
$ virtualenv venv
```
4. Activate it
```
$ source venv/bin/activate
```
5. Install project dependencies
```
$ pip install -r requirements.txt
```
6. Setup app database, running:
```
$ ./syncdb.sh
$ ./migrate.sh
```
7. Tunnel ngrok to localhost:8000
8. Create a file named .env in the project root with the following content:
```
MCASH_MERCHANT_ID=iw1yhe
MCASH_USER=thedude
MCASH_USER_SECRET=supersecret
MCASH_TESTBED_TOKEN=A8_0ie3jUVq2TJ252W42L52DbSnZlWHWIsHkMjYWTdE
MCASH_SHORTLINK_ID=ouK6o
HOST_DOMAIN=< domain generated by ngrok, eg. 14ce6041.ngrok.com >
DEBUG=True
DEV=True
```
9. ./run.sh

[Play with the mCASH testbed.](http://mcashtestbed.appspot.com/testbed/login/?token=A8_0ie3jUVq2TJ252W42L52DbSnZlWHWIsHkMjYWTdE)